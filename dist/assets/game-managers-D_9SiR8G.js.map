{"version":3,"file":"game-managers-D_9SiR8G.js","sources":["../../src/managers/GameManager.js","../../src/managers/AchievementManager.js","../../src/managers/DailyChallengeManager.js","../../src/managers/AccessibilityManager.js"],"sourcesContent":["/**\n * GameManager.js - Core game management with explicit lifecycle and dependency injection\n *\n * This manager handles:\n * - Game state management\n * - Level progression\n * - Score management\n * - Player management\n * - Game object lifecycle\n */\n\nexport class GameManager {\n  constructor(dependencies = {}) {\n    // Dependency injection\n    this.eventBus = dependencies.eventBus;\n    this.logger = dependencies.logger;\n    this.config = dependencies.config;\n\n    // Validate required dependencies\n    if (!this.eventBus) {\n      throw new Error('GameManager requires eventBus dependency');\n    }\n    if (!this.logger) {\n      throw new Error('GameManager requires logger dependency');\n    }\n\n    // Game state\n    this.state = {\n      currentLevel: 1,\n      maxLevel: 10,\n      score: 0,\n      highScore: 0,\n      lives: 3,\n      levelStartTime: null,\n      levelCompleted: false,\n      gameOver: false,\n    };\n\n    // Level configuration\n    this.levelConfigs = this.initializeLevelConfigs();\n\n    // Event handlers\n    this.setupEventHandlers();\n\n    this.logger.info('GameManager initialized');\n  }\n\n  /**\n   * Initialize the manager\n   */\n  async initialize() {\n    this.logger.info('Initializing GameManager...');\n\n    // Load saved game data\n    await this.loadGameData();\n\n    // Set up level\n    this.setupLevel(this.state.currentLevel);\n\n    this.logger.info('GameManager initialized successfully');\n  }\n\n  /**\n   * Cleanup the manager\n   */\n  cleanup() {\n    this.logger.info('Cleaning up GameManager...');\n\n    // Save game data\n    this.saveGameData();\n\n    // Remove event listeners\n    this.removeEventHandlers();\n\n    this.logger.info('GameManager cleaned up');\n  }\n\n  /**\n   * Update the manager\n   */\n  update(deltaTime, gameState) {\n    // Update level timer\n    if (this.state.levelStartTime && !this.state.levelCompleted) {\n      const levelTime = Date.now() - this.state.levelStartTime;\n\n      // Check for level timeout\n      const levelConfig = this.levelConfigs[this.state.currentLevel - 1];\n      if (levelConfig.timeLimit && levelTime > levelConfig.timeLimit) {\n        this.handleLevelTimeout();\n      }\n    }\n\n    // Update game objects based on level\n    this.updateLevelSpecificLogic(deltaTime, gameState);\n  }\n\n  /**\n   * Set up event handlers\n   */\n  setupEventHandlers() {\n    // Player events\n    this.eventBus.on('player:scoreChanged', this.handleScoreChange.bind(this));\n    this.eventBus.on('player:damaged', this.handlePlayerDamaged.bind(this));\n    this.eventBus.on(\n      'player:itemCollected',\n      this.handleItemCollected.bind(this)\n    );\n    this.eventBus.on(\n      'player:levelCompleted',\n      this.handleLevelCompleted.bind(this)\n    );\n\n    // Game events\n    this.eventBus.on('game:input', this.handleGameInput.bind(this));\n    this.eventBus.on('game:configChanged', this.handleConfigChange.bind(this));\n\n    // Achievement events\n    this.eventBus.on(\n      'achievement:unlocked',\n      this.handleAchievementUnlock.bind(this)\n    );\n    this.eventBus.on(\n      'dailyChallenge:completed',\n      this.handleDailyChallengeCompletion.bind(this)\n    );\n  }\n\n  /**\n   * Remove event handlers\n   */\n  removeEventHandlers() {\n    this.eventBus.off(\n      'player:scoreChanged',\n      this.handleScoreChange.bind(this)\n    );\n    this.eventBus.off(\n      'player:damaged',\n      this.handlePlayerDamaged.bind(this)\n    );\n    this.eventBus.off(\n      'player:itemCollected',\n      this.handleItemCollected.bind(this)\n    );\n    this.eventBus.off(\n      'player:levelCompleted',\n      this.handleLevelCompleted.bind(this)\n    );\n    this.eventBus.off('game:input', this.handleGameInput.bind(this));\n    this.eventBus.removeListener(\n      'game:configChanged',\n      this.handleConfigChange.bind(this)\n    );\n    this.eventBus.removeListener(\n      'achievement:unlocked',\n      this.handleAchievementUnlock.bind(this)\n    );\n    this.eventBus.removeListener(\n      'dailyChallenge:completed',\n      this.handleDailyChallengeCompletion.bind(this)\n    );\n  }\n\n  /**\n   * Initialize level configurations\n   */\n  initializeLevelConfigs() {\n    return [\n      { timeLimit: 60000, targetScore: 1000, difficulty: 'easy' },\n      { timeLimit: 90000, targetScore: 2500, difficulty: 'easy' },\n      { timeLimit: 120000, targetScore: 5000, difficulty: 'medium' },\n      { timeLimit: 150000, targetScore: 7500, difficulty: 'medium' },\n      { timeLimit: 180000, targetScore: 10000, difficulty: 'hard' },\n      { timeLimit: 200000, targetScore: 15000, difficulty: 'hard' },\n      { timeLimit: 220000, targetScore: 20000, difficulty: 'expert' },\n      { timeLimit: 240000, targetScore: 25000, difficulty: 'expert' },\n      { timeLimit: 260000, targetScore: 30000, difficulty: 'master' },\n      { timeLimit: 300000, targetScore: 40000, difficulty: 'master' },\n    ];\n  }\n\n  /**\n   * Set up a level\n   */\n  setupLevel(levelNumber) {\n    this.state.currentLevel = levelNumber;\n    this.state.levelStartTime = Date.now();\n    this.state.levelCompleted = false;\n    this.state.gameOver = false;\n\n    const levelConfig = this.levelConfigs[levelNumber - 1];\n    if (!levelConfig) {\n      this.logger.error(`Invalid level number: ${levelNumber}`);\n      return;\n    }\n\n    this.logger.info(\n      `Setting up level ${levelNumber} (${levelConfig.difficulty})`\n    );\n\n    // Emit level start event\n    this.eventBus.emit('level:started', {\n      level: levelNumber,\n      config: levelConfig,\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Handle score changes\n   */\n  handleScoreChange(data) {\n    this.state.score += data.scoreChange || 0;\n\n    // Update high score\n    if (this.state.score > this.state.highScore) {\n      this.state.highScore = this.state.score;\n    }\n\n    // Check level completion based on score\n    const levelConfig = this.levelConfigs[this.state.currentLevel - 1];\n    if (\n      levelConfig &&\n      this.state.score >= levelConfig.targetScore &&\n      !this.state.levelCompleted\n    ) {\n      this.completeLevel();\n    }\n\n    this.eventBus.emit('game:scoreUpdated', {\n      score: this.state.score,\n      highScore: this.state.highScore,\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Handle player damage\n   */\n  handlePlayerDamaged(data) {\n    this.state.lives -= data.damage || 1;\n\n    if (this.state.lives <= 0) {\n      this.gameOver();\n    } else {\n      this.eventBus.emit('game:livesUpdated', {\n        lives: this.state.lives,\n        timestamp: Date.now(),\n      });\n    }\n  }\n\n  /**\n   * Handle item collection\n   */\n  handleItemCollected(data) {\n    const scoreValue = data.scoreValue || 0;\n    this.handleScoreChange({ scoreChange: scoreValue });\n\n    this.logger.info(`Item collected: ${data.itemType}, +${scoreValue} points`);\n  }\n\n  /**\n   * Handle level completion\n   */\n  handleLevelCompleted(data) {\n    this.completeLevel();\n  }\n\n  /**\n   * Complete the current level\n   */\n  completeLevel() {\n    if (this.state.levelCompleted) {\n      return;\n    }\n\n    this.state.levelCompleted = true;\n    const levelTime = Date.now() - this.state.levelStartTime;\n\n    this.logger.info(\n      `Level ${this.state.currentLevel} completed in ${levelTime}ms`\n    );\n\n    // Emit level completion event\n    this.eventBus.emit('level:completed', {\n      level: this.state.currentLevel,\n      score: this.state.score,\n      time: levelTime,\n      timestamp: Date.now(),\n    });\n\n    // Check if game is complete\n    if (this.state.currentLevel >= this.state.maxLevel) {\n      this.completeGame();\n    } else {\n      // Advance to next level after delay\n      setTimeout(() => {\n        this.setupLevel(this.state.currentLevel + 1);\n      }, 2000);\n    }\n  }\n\n  /**\n   * Handle level timeout\n   */\n  handleLevelTimeout() {\n    this.logger.info(`Level ${this.state.currentLevel} timed out`);\n\n    this.eventBus.emit('level:timeout', {\n      level: this.state.currentLevel,\n      timestamp: Date.now(),\n    });\n\n    // Lose a life and restart level\n    this.handlePlayerDamaged({ damage: 1 });\n    if (!this.state.gameOver) {\n      this.setupLevel(this.state.currentLevel);\n    }\n  }\n\n  /**\n   * Complete the entire game\n   */\n  completeGame() {\n    this.logger.info('Game completed!');\n\n    this.eventBus.emit('game:completed', {\n      finalScore: this.state.score,\n      finalLevel: this.state.currentLevel,\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Handle game over\n   */\n  gameOver() {\n    this.state.gameOver = true;\n\n    this.logger.info('Game Over');\n\n    this.eventBus.emit('game:gameOver', {\n      finalScore: this.state.score,\n      finalLevel: this.state.currentLevel,\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Handle game input\n   */\n  handleGameInput(data) {\n    // Handle specific game inputs\n    switch (data.type) {\n      case 'restart':\n        this.restartGame();\n        break;\n      case 'nextLevel':\n        if (this.state.levelCompleted) {\n          this.setupLevel(this.state.currentLevel + 1);\n        }\n        break;\n      case 'pause':\n        this.eventBus.emit('game:pauseRequested', { timestamp: Date.now() });\n        break;\n    }\n  }\n\n  /**\n   * Handle config changes\n   */\n  handleConfigChange(data) {\n    this.config = { ...this.config, ...data.config };\n    this.logger.info('GameManager config updated');\n  }\n\n  /**\n   * Handle achievement unlock\n   */\n  handleAchievementUnlock(data) {\n    // Award bonus points for achievements\n    const bonusScore = data.bonusScore || 0;\n    if (bonusScore > 0) {\n      this.handleScoreChange({ scoreChange: bonusScore });\n    }\n\n    // Apply achievement effects\n    if (data.effects) {\n      this.applyAchievementEffects(data.effects);\n    }\n  }\n\n  /**\n   * Handle daily challenge completion\n   */\n  handleDailyChallengeCompletion(data) {\n    // Award bonus points for daily challenges\n    const bonusScore = data.bonusScore || 0;\n    if (bonusScore > 0) {\n      this.handleScoreChange({ scoreChange: bonusScore });\n    }\n\n    // Apply challenge effects\n    if (data.effects) {\n      this.applyChallengeEffects(data.effects);\n    }\n  }\n\n  /**\n   * Apply achievement effects\n   */\n  applyAchievementEffects(effects) {\n    if (effects.extraLives) {\n      this.state.lives += effects.extraLives;\n    }\n    if (effects.scoreMultiplier) {\n      // Apply score multiplier for a limited time\n      this.temporaryScoreMultiplier = effects.scoreMultiplier;\n      setTimeout(() => {\n        this.temporaryScoreMultiplier = 1;\n      }, effects.duration || 30000);\n    }\n  }\n\n  /**\n   * Apply challenge effects\n   */\n  applyChallengeEffects(effects) {\n    if (effects.temporaryPowerUp) {\n      this.eventBus.emit('game:powerUpActivated', {\n        type: effects.temporaryPowerUp,\n        duration: effects.duration || 30000,\n        timestamp: Date.now(),\n      });\n    }\n  }\n\n  /**\n   * Restart the game\n   */\n  restartGame() {\n    this.state = {\n      currentLevel: 1,\n      maxLevel: 10,\n      score: 0,\n      highScore: this.state.highScore, // Keep high score\n      lives: 3,\n      levelStartTime: null,\n      levelCompleted: false,\n      gameOver: false,\n    };\n\n    this.setupLevel(1);\n\n    this.eventBus.emit('game:restarted', {\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Update level-specific logic\n   */\n  updateLevelSpecificLogic(deltaTime, gameState) {\n    const levelConfig = this.levelConfigs[this.state.currentLevel - 1];\n    if (!levelConfig) return;\n\n    // Level-specific behaviors based on difficulty\n    switch (levelConfig.difficulty) {\n      case 'easy':\n        // Slower enemy spawn rates, easier patterns\n        break;\n      case 'medium':\n        // Moderate difficulty\n        break;\n      case 'hard':\n        // Faster spawn rates, complex patterns\n        break;\n      case 'expert':\n        // Very challenging\n        break;\n      case 'master':\n        // Maximum difficulty\n        break;\n    }\n  }\n\n  /**\n   * Load game data from storage\n   */\n  async loadGameData() {\n    try {\n      const savedData = localStorage.getItem('gameData');\n      if (savedData) {\n        const data = JSON.parse(savedData);\n        this.state.highScore = data.highScore || 0;\n        this.logger.info('Game data loaded from storage');\n      }\n    } catch (error) {\n      this.logger.error('Failed to load game data:', error);\n    }\n  }\n\n  /**\n   * Save game data to storage\n   */\n  saveGameData() {\n    try {\n      const data = {\n        highScore: this.state.highScore,\n        lastPlayed: Date.now(),\n      };\n      localStorage.setItem('gameData', JSON.stringify(data));\n      this.logger.info('Game data saved to storage');\n    } catch (error) {\n      this.logger.error('Failed to save game data:', error);\n    }\n  }\n\n  /**\n   * Get current game state\n   */\n  getState() {\n    return { ...this.state };\n  }\n\n  /**\n   * Get level configuration\n   */\n  getLevelConfig(levelNumber) {\n    return this.levelConfigs[levelNumber - 1];\n  }\n\n  /**\n   * Set level configuration\n   */\n  setLevelConfig(levelNumber, config) {\n    if (levelNumber >= 1 && levelNumber <= this.levelConfigs.length) {\n      this.levelConfigs[levelNumber - 1] = {\n        ...this.levelConfigs[levelNumber - 1],\n        ...config,\n      };\n    }\n  }\n}\n\nexport default GameManager;\n","/**\n * AchievementManager.js - Achievement system with gameplay integration\n *\n * This manager handles:\n * - Achievement definitions and tracking\n * - Progress monitoring\n * - Achievement unlocking\n * - Integration with gameplay events\n */\n\nexport class AchievementManager {\n  constructor(dependencies = {}) {\n    // Dependency injection\n    this.eventBus = dependencies.eventBus;\n    this.logger = dependencies.logger;\n    this.gameState = dependencies.gameState;\n\n    // Validate required dependencies\n    if (!this.eventBus) {\n      throw new Error('AchievementManager requires eventBus dependency');\n    }\n    if (!this.logger) {\n      throw new Error('AchievementManager requires logger dependency');\n    }\n\n    // Achievement state\n    this.achievements = new Map();\n    this.unlockedAchievements = new Set();\n    this.progress = new Map();\n\n    // Initialize achievements\n    this.initializeAchievements();\n\n    // Set up event handlers\n    this.setupEventHandlers();\n\n    this.logger.info('AchievementManager initialized');\n  }\n\n  /**\n   * Initialize the manager\n   */\n  async initialize() {\n    this.logger.info('Initializing AchievementManager...');\n\n    // Load saved achievement data\n    await this.loadAchievementData();\n\n    this.logger.info('AchievementManager initialized successfully');\n  }\n\n  /**\n   * Cleanup the manager\n   */\n  cleanup() {\n    this.logger.info('Cleaning up AchievementManager...');\n\n    // Save achievement data\n    this.saveAchievementData();\n\n    // Remove event listeners\n    this.removeEventHandlers();\n\n    this.logger.info('AchievementManager cleaned up');\n  }\n\n  /**\n   * Update the manager\n   */\n  update(deltaTime, gameState) {\n    // Check for time-based achievements\n    this.checkTimeBasedAchievements(gameState);\n\n    // Check for combo achievements\n    this.checkComboAchievements(gameState);\n  }\n\n  /**\n   * Initialize achievement definitions\n   */\n  initializeAchievements() {\n    // Score-based achievements\n    this.defineAchievement('first_score', {\n      name: 'First Steps',\n      description: 'Score your first 100 points',\n      type: 'score',\n      target: 100,\n      reward: { score: 50, title: 'Beginner' },\n      icon: 'star',\n    });\n\n    this.defineAchievement('score_master', {\n      name: 'Score Master',\n      description: 'Reach 10,000 points',\n      type: 'score',\n      target: 10000,\n      reward: { score: 500, title: 'Score Master' },\n      icon: 'trophy',\n    });\n\n    this.defineAchievement('high_score_king', {\n      name: 'High Score King',\n      description: 'Reach 50,000 points',\n      type: 'score',\n      target: 50000,\n      reward: { score: 2000, title: 'High Score King' },\n      icon: 'crown',\n    });\n\n    // Level-based achievements\n    this.defineAchievement('level_5', {\n      name: 'Level 5 Complete',\n      description: 'Complete level 5',\n      type: 'level',\n      target: 5,\n      reward: { extraLives: 1, title: 'Level 5 Veteran' },\n      icon: 'medal',\n    });\n\n    this.defineAchievement('level_10', {\n      name: 'Level 10 Complete',\n      description: 'Complete level 10',\n      type: 'level',\n      target: 10,\n      reward: { score: 1000, title: 'Level 10 Master' },\n      icon: 'diamond',\n    });\n\n    // Collection achievements\n    this.defineAchievement('collector', {\n      name: 'Collector',\n      description: 'Collect 50 items',\n      type: 'collection',\n      target: 50,\n      reward: { score: 300, title: 'Collector' },\n      icon: 'bag',\n    });\n\n    this.defineAchievement('hoarder', {\n      name: 'Hoarder',\n      description: 'Collect 200 items',\n      type: 'collection',\n      target: 200,\n      reward: { score: 1000, title: 'Hoarder' },\n      icon: 'treasure',\n    });\n\n    // Time-based achievements\n    this.defineAchievement('speed_demon', {\n      name: 'Speed Demon',\n      description: 'Complete a level in under 30 seconds',\n      type: 'speed',\n      target: 30000, // 30 seconds in milliseconds\n      reward: { score: 500, title: 'Speed Demon' },\n      icon: 'lightning',\n    });\n\n    this.defineAchievement('marathon_runner', {\n      name: 'Marathon Runner',\n      description: 'Play for 30 minutes straight',\n      type: 'playtime',\n      target: 1800000, // 30 minutes in milliseconds\n      reward: { score: 1000, title: 'Marathon Runner' },\n      icon: 'clock',\n    });\n\n    // Combo achievements\n    this.defineAchievement('combo_master', {\n      name: 'Combo Master',\n      description: 'Achieve a 10x combo',\n      type: 'combo',\n      target: 10,\n      reward: { score: 200, title: 'Combo Master' },\n      icon: 'fire',\n    });\n\n    this.defineAchievement('combo_legend', {\n      name: 'Combo Legend',\n      description: 'Achieve a 25x combo',\n      type: 'combo',\n      target: 25,\n      reward: { score: 1000, title: 'Combo Legend' },\n      icon: 'explosion',\n    });\n\n    // Special achievements\n    this.defineAchievement('perfect_level', {\n      name: 'Perfect Level',\n      description: 'Complete a level without taking damage',\n      type: 'perfect',\n      target: 1,\n      reward: { score: 750, title: 'Perfect Player' },\n      icon: 'shield',\n    });\n\n    this.defineAchievement('comeback_kid', {\n      name: 'Comeback Kid',\n      description: 'Complete a level with only 1 life remaining',\n      type: 'comeback',\n      target: 1,\n      reward: { score: 500, title: 'Comeback Kid' },\n      icon: 'heart',\n    });\n  }\n\n  /**\n   * Define an achievement\n   */\n  defineAchievement(id, definition) {\n    this.achievements.set(id, {\n      id,\n      ...definition,\n      unlocked: false,\n      unlockedAt: null,\n      progress: 0,\n    });\n\n    // Initialize progress tracking\n    this.progress.set(id, 0);\n  }\n\n  /**\n   * Set up event handlers\n   */\n  setupEventHandlers() {\n    // Score events\n    this.eventBus.on('player:scoreChanged', this.handleScoreChange.bind(this));\n\n    // Level events\n    this.eventBus.on(\n      'player:levelCompleted',\n      this.handleLevelCompleted.bind(this)\n    );\n\n    // Collection events\n    this.eventBus.on(\n      'player:itemCollected',\n      this.handleItemCollected.bind(this)\n    );\n\n    // Game events\n    this.eventBus.on('game:started', this.handleGameStarted.bind(this));\n    this.eventBus.on('level:completed', this.handleLevelCompleted.bind(this));\n\n    // Combo events\n    this.eventBus.on('player:comboChanged', this.handleComboChanged.bind(this));\n\n    // Damage events\n    this.eventBus.on('player:damaged', this.handlePlayerDamaged.bind(this));\n  }\n\n  /**\n   * Remove event handlers\n   */\n  removeEventHandlers() {\n    this.eventBus.removeListener(\n      'player:scoreChanged',\n      this.handleScoreChange.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:levelCompleted',\n      this.handleLevelCompleted.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:itemCollected',\n      this.handleItemCollected.bind(this)\n    );\n    this.eventBus.removeListener(\n      'game:started',\n      this.handleGameStarted.bind(this)\n    );\n    this.eventBus.removeListener(\n      'level:completed',\n      this.handleLevelCompleted.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:comboChanged',\n      this.handleComboChanged.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:damaged',\n      this.handlePlayerDamaged.bind(this)\n    );\n  }\n\n  /**\n   * Handle score changes\n   */\n  handleScoreChange(data) {\n    const currentScore = this.gameState().score;\n    this.checkScoreAchievements(currentScore);\n  }\n\n  /**\n   * Handle level completion\n   */\n  handleLevelCompleted(data) {\n    this.checkLevelAchievements(data.level);\n    this.checkSpeedAchievements(data.time);\n    this.checkPerfectLevelAchievements(data);\n  }\n\n  /**\n   * Handle item collection\n   */\n  handleItemCollected(data) {\n    this.checkCollectionAchievements(data.itemType);\n  }\n\n  /**\n   * Handle game start\n   */\n  handleGameStarted(data) {\n    this.gameStartTime = data.timestamp;\n  }\n\n  /**\n   * Handle combo changes\n   */\n  handleComboChanged(data) {\n    this.checkComboAchievements(data.combo);\n  }\n\n  /**\n   * Handle player damage\n   */\n  handlePlayerDamaged(data) {\n    this.currentLevelPerfect = false;\n  }\n\n  /**\n   * Check score-based achievements\n   */\n  checkScoreAchievements(currentScore) {\n    this.checkAchievementsByType('score', currentScore);\n  }\n\n  /**\n   * Check level-based achievements\n   */\n  checkLevelAchievements(level) {\n    this.checkAchievementsByType('level', level);\n  }\n\n  /**\n   * Check collection-based achievements\n   */\n  checkCollectionAchievements(itemType) {\n    // Increment collection count\n    const currentCount = this.progress.get('collector') || 0;\n    this.progress.set('collector', currentCount + 1);\n\n    this.checkAchievementsByType('collection', this.progress.get('collector'));\n  }\n\n  /**\n   * Check speed-based achievements\n   */\n  checkSpeedAchievements(levelTime) {\n    this.checkAchievementsByType('speed', levelTime);\n  }\n\n  /**\n   * Check combo-based achievements\n   */\n  checkComboAchievements(combo) {\n    this.checkAchievementsByType('combo', combo);\n  }\n\n  /**\n   * Check time-based achievements\n   */\n  checkTimeBasedAchievements(gameState) {\n    if (this.gameStartTime) {\n      const playTime = Date.now() - this.gameStartTime;\n      this.checkAchievementsByType('playtime', playTime);\n    }\n  }\n\n  /**\n   * Check combo achievements\n   */\n  checkComboAchievements(gameState) {\n    // This would check for combo achievements based on game state\n    // Implementation depends on how combos are tracked in the game\n  }\n\n  /**\n   * Check perfect level achievements\n   */\n  checkPerfectLevelAchievements(levelData) {\n    if (levelData.perfect) {\n      this.checkAchievementsByType('perfect', 1);\n    }\n  }\n\n  /**\n   * Check achievements by type\n   */\n  checkAchievementsByType(type, value) {\n    for (const [id, achievement] of this.achievements) {\n      if (achievement.type === type && !achievement.unlocked) {\n        if (value >= achievement.target) {\n          this.unlockAchievement(id);\n        } else {\n          // Update progress\n          this.progress.set(id, value);\n          achievement.progress = value;\n        }\n      }\n    }\n  }\n\n  /**\n   * Unlock an achievement\n   */\n  unlockAchievement(id) {\n    const achievement = this.achievements.get(id);\n    if (!achievement || achievement.unlocked) {\n      return;\n    }\n\n    achievement.unlocked = true;\n    achievement.unlockedAt = Date.now();\n    this.unlockedAchievements.add(id);\n\n    this.logger.info(`Achievement unlocked: ${achievement.name}`);\n\n    // Emit achievement unlocked event\n    this.eventBus.emit('achievement:unlocked', {\n      id,\n      name: achievement.name,\n      description: achievement.description,\n      reward: achievement.reward,\n      icon: achievement.icon,\n      timestamp: Date.now(),\n    });\n\n    // Apply reward\n    this.applyAchievementReward(achievement);\n  }\n\n  /**\n   * Apply achievement reward\n   */\n  applyAchievementReward(achievement) {\n    if (!achievement.reward) return;\n\n    const reward = achievement.reward;\n\n    // Score reward\n    if (reward.score) {\n      this.eventBus.emit('player:scoreChanged', {\n        scoreChange: reward.score,\n        source: 'achievement',\n        achievementId: achievement.id,\n      });\n    }\n\n    // Extra lives reward\n    if (reward.extraLives) {\n      this.eventBus.emit('player:livesChanged', {\n        livesChange: reward.extraLives,\n        source: 'achievement',\n        achievementId: achievement.id,\n      });\n    }\n\n    // Title reward\n    if (reward.title) {\n      this.eventBus.emit('player:titleChanged', {\n        title: reward.title,\n        source: 'achievement',\n        achievementId: achievement.id,\n      });\n    }\n\n    // Special effects\n    if (reward.effects) {\n      this.eventBus.emit('game:achievementEffect', {\n        effects: reward.effects,\n        achievementId: achievement.id,\n      });\n    }\n  }\n\n  /**\n   * Get achievement by ID\n   */\n  getAchievement(id) {\n    return this.achievements.get(id);\n  }\n\n  /**\n   * Get all achievements\n   */\n  getAllAchievements() {\n    return Array.from(this.achievements.values());\n  }\n\n  /**\n   * Get unlocked achievements\n   */\n  getUnlockedAchievements() {\n    return Array.from(this.achievements.values()).filter((a) => a.unlocked);\n  }\n\n  /**\n   * Get achievement progress\n   */\n  getAchievementProgress(id) {\n    const achievement = this.achievements.get(id);\n    if (!achievement) return null;\n\n    return {\n      id,\n      name: achievement.name,\n      description: achievement.description,\n      progress: achievement.progress,\n      target: achievement.target,\n      percentage: Math.min(\n        (achievement.progress / achievement.target) * 100,\n        100\n      ),\n      unlocked: achievement.unlocked,\n    };\n  }\n\n  /**\n   * Get all achievement progress\n   */\n  getAllAchievementProgress() {\n    const progress = [];\n    for (const [id, achievement] of this.achievements) {\n      progress.push(this.getAchievementProgress(id));\n    }\n    return progress;\n  }\n\n  /**\n   * Load achievement data from storage\n   */\n  async loadAchievementData() {\n    try {\n      const savedData = localStorage.getItem('achievementData');\n      if (savedData) {\n        const data = JSON.parse(savedData);\n\n        // Restore unlocked achievements\n        if (data.unlocked) {\n          data.unlocked.forEach((id) => {\n            if (this.achievements.has(id)) {\n              this.achievements.get(id).unlocked = true;\n              this.unlockedAchievements.add(id);\n            }\n          });\n        }\n\n        // Restore progress\n        if (data.progress) {\n          for (const [id, progress] of Object.entries(data.progress)) {\n            if (this.achievements.has(id)) {\n              this.achievements.get(id).progress = progress;\n              this.progress.set(id, progress);\n            }\n          }\n        }\n\n        this.logger.info('Achievement data loaded from storage');\n      }\n    } catch (error) {\n      this.logger.error('Failed to load achievement data:', error);\n    }\n  }\n\n  /**\n   * Save achievement data to storage\n   */\n  saveAchievementData() {\n    try {\n      const data = {\n        unlocked: Array.from(this.unlockedAchievements),\n        progress: Object.fromEntries(this.progress),\n      };\n      localStorage.setItem('achievementData', JSON.stringify(data));\n      this.logger.info('Achievement data saved to storage');\n    } catch (error) {\n      this.logger.error('Failed to save achievement data:', error);\n    }\n  }\n\n  /**\n   * Reset all achievements\n   */\n  resetAchievements() {\n    this.unlockedAchievements.clear();\n    this.progress.clear();\n\n    for (const [id, achievement] of this.achievements) {\n      achievement.unlocked = false;\n      achievement.unlockedAt = null;\n      achievement.progress = 0;\n      this.progress.set(id, 0);\n    }\n\n    this.logger.info('All achievements reset');\n  }\n}\n\nexport default AchievementManager;\n","/**\n * DailyChallengeManager.js - Daily challenge system with gameplay integration\n *\n * This manager handles:\n * - Daily challenge generation and rotation\n * - Challenge progress tracking\n * - Challenge completion rewards\n * - Integration with gameplay events\n */\n\nexport class DailyChallengeManager {\n  constructor(dependencies = {}) {\n    // Dependency injection\n    this.eventBus = dependencies.eventBus;\n    this.logger = dependencies.logger;\n    this.gameState = dependencies.gameState;\n\n    // Validate required dependencies\n    if (!this.eventBus) {\n      throw new Error('DailyChallengeManager requires eventBus dependency');\n    }\n    if (!this.logger) {\n      throw new Error('DailyChallengeManager requires logger dependency');\n    }\n\n    // Challenge state\n    this.challenges = new Map();\n    this.activeChallenges = [];\n    this.completedChallenges = new Set();\n    this.challengeProgress = new Map();\n    this.lastChallengeDate = null;\n\n    // Challenge templates\n    this.challengeTemplates = this.initializeChallengeTemplates();\n\n    // Set up event handlers\n    this.setupEventHandlers();\n\n    this.logger.info('DailyChallengeManager initialized');\n  }\n\n  /**\n   * Initialize the manager\n   */\n  async initialize() {\n    this.logger.info('Initializing DailyChallengeManager...');\n\n    // Load saved challenge data\n    await this.loadChallengeData();\n\n    // Generate today's challenges\n    this.generateDailyChallenges();\n\n    this.logger.info('DailyChallengeManager initialized successfully');\n  }\n\n  /**\n   * Cleanup the manager\n   */\n  cleanup() {\n    this.logger.info('Cleaning up DailyChallengeManager...');\n\n    // Save challenge data\n    this.saveChallengeData();\n\n    // Remove event listeners\n    this.removeEventHandlers();\n\n    this.logger.info('DailyChallengeManager cleaned up');\n  }\n\n  /**\n   * Update the manager\n   */\n  update(deltaTime, gameState) {\n    // Check if we need to generate new daily challenges\n    this.checkDailyChallengeRotation();\n\n    // Update challenge progress\n    this.updateChallengeProgress(gameState);\n  }\n\n  /**\n   * Initialize challenge templates\n   */\n  initializeChallengeTemplates() {\n    return {\n      score: [\n        {\n          name: 'Score Hunter',\n          description: 'Score {target} points in a single game',\n          type: 'score',\n          difficulty: 'easy',\n          target: 1000,\n          reward: { score: 200, coins: 10 },\n        },\n        {\n          name: 'Score Master',\n          description: 'Score {target} points in a single game',\n          type: 'score',\n          difficulty: 'medium',\n          target: 5000,\n          reward: { score: 500, coins: 25 },\n        },\n        {\n          name: 'Score Legend',\n          description: 'Score {target} points in a single game',\n          type: 'score',\n          difficulty: 'hard',\n          target: 15000,\n          reward: { score: 1000, coins: 50 },\n        },\n      ],\n      level: [\n        {\n          name: 'Level Climber',\n          description: 'Reach level {target}',\n          type: 'level',\n          difficulty: 'easy',\n          target: 3,\n          reward: { score: 300, coins: 15 },\n        },\n        {\n          name: 'Level Master',\n          description: 'Reach level {target}',\n          type: 'level',\n          difficulty: 'medium',\n          target: 7,\n          reward: { score: 750, coins: 35 },\n        },\n        {\n          name: 'Level Legend',\n          description: 'Reach level {target}',\n          type: 'level',\n          difficulty: 'hard',\n          target: 10,\n          reward: { score: 1500, coins: 75 },\n        },\n      ],\n      collection: [\n        {\n          name: 'Item Collector',\n          description: 'Collect {target} items in a single game',\n          type: 'collection',\n          difficulty: 'easy',\n          target: 10,\n          reward: { score: 150, coins: 8 },\n        },\n        {\n          name: 'Item Hoarder',\n          description: 'Collect {target} items in a single game',\n          type: 'collection',\n          difficulty: 'medium',\n          target: 25,\n          reward: { score: 400, coins: 20 },\n        },\n        {\n          name: 'Item Master',\n          description: 'Collect {target} items in a single game',\n          type: 'collection',\n          difficulty: 'hard',\n          target: 50,\n          reward: { score: 800, coins: 40 },\n        },\n      ],\n      combo: [\n        {\n          name: 'Combo Starter',\n          description: 'Achieve a {target}x combo',\n          type: 'combo',\n          difficulty: 'easy',\n          target: 5,\n          reward: { score: 100, coins: 5 },\n        },\n        {\n          name: 'Combo Master',\n          description: 'Achieve a {target}x combo',\n          type: 'combo',\n          difficulty: 'medium',\n          target: 15,\n          reward: { score: 300, coins: 15 },\n        },\n        {\n          name: 'Combo Legend',\n          description: 'Achieve a {target}x combo',\n          type: 'combo',\n          difficulty: 'hard',\n          target: 30,\n          reward: { score: 600, coins: 30 },\n        },\n      ],\n      time: [\n        {\n          name: 'Speed Runner',\n          description: 'Complete a level in under {target} seconds',\n          type: 'time',\n          difficulty: 'easy',\n          target: 60,\n          reward: { score: 200, coins: 10 },\n        },\n        {\n          name: 'Speed Master',\n          description: 'Complete a level in under {target} seconds',\n          type: 'time',\n          difficulty: 'medium',\n          target: 30,\n          reward: { score: 500, coins: 25 },\n        },\n        {\n          name: 'Speed Legend',\n          description: 'Complete a level in under {target} seconds',\n          type: 'time',\n          difficulty: 'hard',\n          target: 15,\n          reward: { score: 1000, coins: 50 },\n        },\n      ],\n      survival: [\n        {\n          name: 'Survivor',\n          description: 'Complete {target} levels without dying',\n          type: 'survival',\n          difficulty: 'easy',\n          target: 3,\n          reward: { score: 400, coins: 20 },\n        },\n        {\n          name: 'Survival Master',\n          description: 'Complete {target} levels without dying',\n          type: 'survival',\n          difficulty: 'medium',\n          target: 7,\n          reward: { score: 1000, coins: 50 },\n        },\n        {\n          name: 'Survival Legend',\n          description: 'Complete {target} levels without dying',\n          type: 'survival',\n          difficulty: 'hard',\n          target: 10,\n          reward: { score: 2000, coins: 100 },\n        },\n      ],\n    };\n  }\n\n  /**\n   * Set up event handlers\n   */\n  setupEventHandlers() {\n    // Score events\n    this.eventBus.on('player:scoreChanged', this.handleScoreChange.bind(this));\n\n    // Level events\n    this.eventBus.on(\n      'player:levelCompleted',\n      this.handleLevelCompleted.bind(this)\n    );\n\n    // Collection events\n    this.eventBus.on(\n      'player:itemCollected',\n      this.handleItemCollected.bind(this)\n    );\n\n    // Combo events\n    this.eventBus.on('player:comboChanged', this.handleComboChanged.bind(this));\n\n    // Game events\n    this.eventBus.on('game:started', this.handleGameStarted.bind(this));\n    this.eventBus.on('level:completed', this.handleLevelCompleted.bind(this));\n\n    // Damage events\n    this.eventBus.on('player:damaged', this.handlePlayerDamaged.bind(this));\n  }\n\n  /**\n   * Remove event handlers\n   */\n  removeEventHandlers() {\n    this.eventBus.removeListener(\n      'player:scoreChanged',\n      this.handleScoreChange.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:levelCompleted',\n      this.handleLevelCompleted.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:itemCollected',\n      this.handleItemCollected.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:comboChanged',\n      this.handleComboChanged.bind(this)\n    );\n    this.eventBus.removeListener(\n      'game:started',\n      this.handleGameStarted.bind(this)\n    );\n    this.eventBus.removeListener(\n      'level:completed',\n      this.handleLevelCompleted.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:damaged',\n      this.handlePlayerDamaged.bind(this)\n    );\n  }\n\n  /**\n   * Generate daily challenges\n   */\n  generateDailyChallenges() {\n    const today = new Date().toDateString();\n\n    // Check if we need to generate new challenges\n    if (this.lastChallengeDate === today) {\n      return;\n    }\n\n    // Clear previous challenges\n    this.activeChallenges = [];\n    this.completedChallenges.clear();\n    this.challengeProgress.clear();\n\n    // Generate 3 random challenges\n    const challengeTypes = Object.keys(this.challengeTemplates);\n    const selectedTypes = this.getRandomElements(challengeTypes, 3);\n\n    selectedTypes.forEach((type, index) => {\n      const template = this.getRandomElement(this.challengeTemplates[type]);\n      const challenge = this.createChallenge(template, index);\n      this.activeChallenges.push(challenge);\n      this.challenges.set(challenge.id, challenge);\n    });\n\n    this.lastChallengeDate = today;\n    this.logger.info(\n      `Generated ${this.activeChallenges.length} daily challenges for ${today}`\n    );\n\n    // Emit challenges generated event\n    this.eventBus.emit('dailyChallenges:generated', {\n      challenges: this.activeChallenges,\n      date: today,\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Create a challenge from template\n   */\n  createChallenge(template, index) {\n    const id = `daily_${Date.now()}_${index}`;\n    const challenge = {\n      id,\n      name: template.name,\n      description: template.description.replace('{target}', template.target),\n      type: template.type,\n      difficulty: template.difficulty,\n      target: template.target,\n      reward: template.reward,\n      progress: 0,\n      completed: false,\n      completedAt: null,\n      createdAt: Date.now(),\n    };\n\n    return challenge;\n  }\n\n  /**\n   * Check daily challenge rotation\n   */\n  checkDailyChallengeRotation() {\n    const today = new Date().toDateString();\n    if (this.lastChallengeDate !== today) {\n      this.generateDailyChallenges();\n    }\n  }\n\n  /**\n   * Update challenge progress\n   */\n  updateChallengeProgress(gameState) {\n    // This method can be used for real-time progress updates\n    // that don't require specific events\n  }\n\n  /**\n   * Handle score changes\n   */\n  handleScoreChange(data) {\n    this.checkScoreChallenges(data.score);\n  }\n\n  /**\n   * Handle level completion\n   */\n  handleLevelCompleted(data) {\n    this.checkLevelChallenges(data.level);\n    this.checkTimeChallenges(data.time);\n    this.checkSurvivalChallenges(data);\n  }\n\n  /**\n   * Handle item collection\n   */\n  handleItemCollected(data) {\n    this.checkCollectionChallenges(data.itemType);\n  }\n\n  /**\n   * Handle combo changes\n   */\n  handleComboChanged(data) {\n    this.checkComboChallenges(data.combo);\n  }\n\n  /**\n   * Handle game start\n   */\n  handleGameStarted(data) {\n    this.gameStartTime = data.timestamp;\n    this.currentGameScore = 0;\n    this.currentGameLevel = 0;\n    this.currentGameItems = 0;\n    this.currentGameCombo = 0;\n    this.survivalCount = 0;\n  }\n\n  /**\n   * Handle player damage\n   */\n  handlePlayerDamaged(data) {\n    this.survivalCount = 0; // Reset survival count on damage\n  }\n\n  /**\n   * Check score-based challenges\n   */\n  checkScoreChallenges(currentScore) {\n    this.currentGameScore = currentScore;\n    this.checkChallengesByType('score', currentScore);\n  }\n\n  /**\n   * Check level-based challenges\n   */\n  checkLevelChallenges(level) {\n    this.currentGameLevel = level;\n    this.checkChallengesByType('level', level);\n  }\n\n  /**\n   * Check collection-based challenges\n   */\n  checkCollectionChallenges(itemType) {\n    this.currentGameItems++;\n    this.checkChallengesByType('collection', this.currentGameItems);\n  }\n\n  /**\n   * Check combo-based challenges\n   */\n  checkComboChallenges(combo) {\n    this.currentGameCombo = combo;\n    this.checkChallengesByType('combo', combo);\n  }\n\n  /**\n   * Check time-based challenges\n   */\n  checkTimeChallenges(levelTime) {\n    const timeInSeconds = Math.floor(levelTime / 1000);\n    this.checkChallengesByType('time', timeInSeconds);\n  }\n\n  /**\n   * Check survival challenges\n   */\n  checkSurvivalChallenges(levelData) {\n    this.survivalCount++;\n    this.checkChallengesByType('survival', this.survivalCount);\n  }\n\n  /**\n   * Check challenges by type\n   */\n  checkChallengesByType(type, value) {\n    for (const challenge of this.activeChallenges) {\n      if (challenge.type === type && !challenge.completed) {\n        if (value >= challenge.target) {\n          this.completeChallenge(challenge.id);\n        } else {\n          // Update progress\n          challenge.progress = value;\n          this.challengeProgress.set(challenge.id, value);\n        }\n      }\n    }\n  }\n\n  /**\n   * Complete a challenge\n   */\n  completeChallenge(challengeId) {\n    const challenge = this.challenges.get(challengeId);\n    if (!challenge || challenge.completed) {\n      return;\n    }\n\n    challenge.completed = true;\n    challenge.completedAt = Date.now();\n    this.completedChallenges.add(challengeId);\n\n    this.logger.info(`Daily challenge completed: ${challenge.name}`);\n\n    // Emit challenge completed event\n    this.eventBus.emit('dailyChallenge:completed', {\n      id: challengeId,\n      name: challenge.name,\n      description: challenge.description,\n      reward: challenge.reward,\n      timestamp: Date.now(),\n    });\n\n    // Apply reward\n    this.applyChallengeReward(challenge);\n  }\n\n  /**\n   * Apply challenge reward\n   */\n  applyChallengeReward(challenge) {\n    if (!challenge.reward) return;\n\n    const reward = challenge.reward;\n\n    // Score reward\n    if (reward.score) {\n      this.eventBus.emit('player:scoreChanged', {\n        scoreChange: reward.score,\n        source: 'dailyChallenge',\n        challengeId: challenge.id,\n      });\n    }\n\n    // Coins reward\n    if (reward.coins) {\n      this.eventBus.emit('player:coinsChanged', {\n        coinsChange: reward.coins,\n        source: 'dailyChallenge',\n        challengeId: challenge.id,\n      });\n    }\n\n    // Special effects\n    if (reward.effects) {\n      this.eventBus.emit('game:challengeEffect', {\n        effects: reward.effects,\n        challengeId: challenge.id,\n      });\n    }\n  }\n\n  /**\n   * Get active challenges\n   */\n  getActiveChallenges() {\n    return this.activeChallenges.filter((c) => !c.completed);\n  }\n\n  /**\n   * Get completed challenges\n   */\n  getCompletedChallenges() {\n    return this.activeChallenges.filter((c) => c.completed);\n  }\n\n  /**\n   * Get all challenges\n   */\n  getAllChallenges() {\n    return this.activeChallenges;\n  }\n\n  /**\n   * Get challenge progress\n   */\n  getChallengeProgress(challengeId) {\n    const challenge = this.challenges.get(challengeId);\n    if (!challenge) return null;\n\n    return {\n      id: challengeId,\n      name: challenge.name,\n      description: challenge.description,\n      progress: challenge.progress,\n      target: challenge.target,\n      percentage: Math.min((challenge.progress / challenge.target) * 100, 100),\n      completed: challenge.completed,\n      difficulty: challenge.difficulty,\n      reward: challenge.reward,\n    };\n  }\n\n  /**\n   * Get all challenge progress\n   */\n  getAllChallengeProgress() {\n    const progress = [];\n    for (const challenge of this.activeChallenges) {\n      progress.push(this.getChallengeProgress(challenge.id));\n    }\n    return progress;\n  }\n\n  /**\n   * Get random elements from array\n   */\n  getRandomElements(array, count) {\n    const shuffled = array.sort(() => 0.5 - Math.random());\n    return shuffled.slice(0, count);\n  }\n\n  /**\n   * Get random element from array\n   */\n  getRandomElement(array) {\n    return array[Math.floor(Math.random() * array.length)];\n  }\n\n  /**\n   * Load challenge data from storage\n   */\n  async loadChallengeData() {\n    try {\n      const savedData = localStorage.getItem('dailyChallengeData');\n      if (savedData) {\n        const data = JSON.parse(savedData);\n\n        // Restore last challenge date\n        this.lastChallengeDate = data.lastChallengeDate;\n\n        // Restore completed challenges\n        if (data.completed) {\n          data.completed.forEach((id) => {\n            this.completedChallenges.add(id);\n          });\n        }\n\n        // Restore progress\n        if (data.progress) {\n          for (const [id, progress] of Object.entries(data.progress)) {\n            this.challengeProgress.set(id, progress);\n          }\n        }\n\n        this.logger.info('Daily challenge data loaded from storage');\n      }\n    } catch (error) {\n      this.logger.error('Failed to load daily challenge data:', error);\n    }\n  }\n\n  /**\n   * Save challenge data to storage\n   */\n  saveChallengeData() {\n    try {\n      const data = {\n        lastChallengeDate: this.lastChallengeDate,\n        completed: Array.from(this.completedChallenges),\n        progress: Object.fromEntries(this.challengeProgress),\n      };\n      localStorage.setItem('dailyChallengeData', JSON.stringify(data));\n      this.logger.info('Daily challenge data saved to storage');\n    } catch (error) {\n      this.logger.error('Failed to save daily challenge data:', error);\n    }\n  }\n\n  /**\n   * Reset all challenges\n   */\n  resetChallenges() {\n    this.activeChallenges = [];\n    this.completedChallenges.clear();\n    this.challengeProgress.clear();\n    this.lastChallengeDate = null;\n\n    this.logger.info('All daily challenges reset');\n  }\n}\n\nexport default DailyChallengeManager;\n","/**\n * AccessibilityManager.js - Accessibility features with gameplay integration\n *\n * This manager handles:\n * - Screen reader support\n * - High contrast mode\n * - Colorblind support\n * - Keyboard navigation\n * - Audio cues and descriptions\n * - Text scaling\n * - Motion reduction\n */\n\nexport class AccessibilityManager {\n  constructor(dependencies = {}) {\n    // Dependency injection\n    this.eventBus = dependencies.eventBus;\n    this.logger = dependencies.logger;\n    this.gameState = dependencies.gameState;\n\n    // Validate required dependencies\n    if (!this.eventBus) {\n      throw new Error('AccessibilityManager requires eventBus dependency');\n    }\n    if (!this.logger) {\n      throw new Error('AccessibilityManager requires logger dependency');\n    }\n\n    // Accessibility settings\n    this.settings = {\n      screenReader: false,\n      highContrast: false,\n      colorblindMode: 'none', // 'none', 'protanopia', 'deuteranopia', 'tritanopia'\n      keyboardNavigation: false,\n      audioCues: true,\n      audioDescriptions: false,\n      textScaling: 1.0,\n      motionReduction: false,\n      reducedAnimations: false,\n      largeText: false,\n      focusIndicators: true,\n    };\n\n    // Audio context for sound cues\n    this.audioContext = null;\n    this.audioEnabled = true;\n\n    // Screen reader support\n    this.announcements = [];\n    this.announcementQueue = [];\n\n    // Set up event handlers\n    this.setupEventHandlers();\n\n    this.logger.info('AccessibilityManager initialized');\n  }\n\n  /**\n   * Initialize the manager\n   */\n  async initialize() {\n    this.logger.info('Initializing AccessibilityManager...');\n\n    // Load accessibility settings\n    await this.loadAccessibilitySettings();\n\n    // Initialize audio context\n    this.initializeAudio();\n\n    // Set up DOM accessibility features\n    this.setupDOMAccessibility();\n\n    this.logger.info('AccessibilityManager initialized successfully');\n  }\n\n  /**\n   * Cleanup the manager\n   */\n  cleanup() {\n    this.logger.info('Cleaning up AccessibilityManager...');\n\n    // Save accessibility settings\n    this.saveAccessibilitySettings();\n\n    // Remove event listeners\n    this.removeEventHandlers();\n\n    // Clean up audio context\n    if (this.audioContext) {\n      this.audioContext.close();\n    }\n\n    this.logger.info('AccessibilityManager cleaned up');\n  }\n\n  /**\n   * Update the manager\n   */\n  update(deltaTime, gameState) {\n    // Process announcement queue\n    this.processAnnouncementQueue();\n\n    // Update accessibility features based on game state\n    this.updateAccessibilityFeatures(gameState);\n  }\n\n  /**\n   * Set up event handlers\n   */\n  setupEventHandlers() {\n    // Game state events\n    this.eventBus.on('game:started', this.handleGameStarted.bind(this));\n    this.eventBus.on('game:paused', this.handleGamePaused.bind(this));\n    this.eventBus.on('game:resumed', this.handleGameResumed.bind(this));\n    this.eventBus.on('game:stopped', this.handleGameStopped.bind(this));\n\n    // Player events\n    this.eventBus.on('player:scoreChanged', this.handleScoreChanged.bind(this));\n    this.eventBus.on('player:damaged', this.handlePlayerDamaged.bind(this));\n    this.eventBus.on(\n      'player:itemCollected',\n      this.handleItemCollected.bind(this)\n    );\n\n    // Level events\n    this.eventBus.on('level:started', this.handleLevelStarted.bind(this));\n    this.eventBus.on('level:completed', this.handleLevelCompleted.bind(this));\n\n    // Achievement events\n    this.eventBus.on(\n      'achievement:unlocked',\n      this.handleAchievementUnlocked.bind(this)\n    );\n    this.eventBus.on(\n      'dailyChallenge:completed',\n      this.handleDailyChallengeCompleted.bind(this)\n    );\n\n    // Input events\n    this.eventBus.on('game:input', this.handleInput.bind(this));\n  }\n\n  /**\n   * Remove event handlers\n   */\n  removeEventHandlers() {\n    this.eventBus.removeListener(\n      'game:started',\n      this.handleGameStarted.bind(this)\n    );\n    this.eventBus.removeListener(\n      'game:paused',\n      this.handleGamePaused.bind(this)\n    );\n    this.eventBus.removeListener(\n      'game:resumed',\n      this.handleGameResumed.bind(this)\n    );\n    this.eventBus.removeListener(\n      'game:stopped',\n      this.handleGameStopped.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:scoreChanged',\n      this.handleScoreChanged.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:damaged',\n      this.handlePlayerDamaged.bind(this)\n    );\n    this.eventBus.removeListener(\n      'player:itemCollected',\n      this.handleItemCollected.bind(this)\n    );\n    this.eventBus.removeListener(\n      'level:started',\n      this.handleLevelStarted.bind(this)\n    );\n    this.eventBus.removeListener(\n      'level:completed',\n      this.handleLevelCompleted.bind(this)\n    );\n    this.eventBus.removeListener(\n      'achievement:unlocked',\n      this.handleAchievementUnlocked.bind(this)\n    );\n    this.eventBus.removeListener(\n      'dailyChallenge:completed',\n      this.handleDailyChallengeCompleted.bind(this)\n    );\n    this.eventBus.removeListener('game:input', this.handleInput.bind(this));\n  }\n\n  /**\n   * Initialize audio context\n   */\n  initializeAudio() {\n    try {\n      this.audioContext = new (window.AudioContext ||\n        window.webkitAudioContext)();\n      this.audioEnabled = true;\n    } catch (error) {\n      this.logger.warn('Audio context not available:', error);\n      this.audioEnabled = false;\n    }\n  }\n\n  /**\n   * Set up DOM accessibility features\n   */\n  setupDOMAccessibility() {\n    // Create announcement region for screen readers\n    this.createAnnouncementRegion();\n\n    // Set up keyboard navigation\n    this.setupKeyboardNavigation();\n\n    // Apply initial accessibility settings\n    this.applyAccessibilitySettings();\n  }\n\n  /**\n   * Create announcement region for screen readers\n   */\n  createAnnouncementRegion() {\n    const announcementRegion = document.createElement('div');\n    announcementRegion.id = 'accessibility-announcements';\n    announcementRegion.setAttribute('aria-live', 'polite');\n    announcementRegion.setAttribute('aria-atomic', 'true');\n    announcementRegion.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcementRegion);\n  }\n\n  /**\n   * Set up keyboard navigation\n   */\n  setupKeyboardNavigation() {\n    if (!this.settings.keyboardNavigation) return;\n\n    document.addEventListener('keydown', (event) => {\n      this.handleKeyboardNavigation(event);\n    });\n  }\n\n  /**\n   * Handle keyboard navigation\n   */\n  handleKeyboardNavigation(event) {\n    if (!this.settings.keyboardNavigation) return;\n\n    switch (event.key) {\n      case 'Tab':\n        // Ensure proper tab order\n        this.handleTabNavigation(event);\n        break;\n      case 'Enter':\n      case ' ':\n        // Handle activation\n        this.handleActivation(event);\n        break;\n      case 'Escape':\n        // Handle escape key\n        this.handleEscape(event);\n        break;\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'ArrowLeft':\n      case 'ArrowRight':\n        // Handle arrow key navigation\n        this.handleArrowNavigation(event);\n        break;\n    }\n  }\n\n  /**\n   * Handle tab navigation\n   */\n  handleTabNavigation(event) {\n    // Ensure focusable elements are properly ordered\n    const focusableElements = document.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    // This would implement custom tab order logic\n    // based on game state and UI layout\n  }\n\n  /**\n   * Handle activation\n   */\n  handleActivation(event) {\n    const activeElement = document.activeElement;\n    if (activeElement && activeElement.click) {\n      activeElement.click();\n    }\n  }\n\n  /**\n   * Handle escape key\n   */\n  handleEscape(event) {\n    // Emit escape event for game to handle\n    this.eventBus.emit('accessibility:escape', {\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Handle arrow key navigation\n   */\n  handleArrowNavigation(event) {\n    // Emit arrow navigation event\n    this.eventBus.emit('accessibility:arrowNavigation', {\n      direction: event.key.replace('Arrow', '').toLowerCase(),\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Apply accessibility settings\n   */\n  applyAccessibilitySettings() {\n    const root = document.documentElement;\n\n    // High contrast mode\n    if (this.settings.highContrast) {\n      root.classList.add('high-contrast');\n    } else {\n      root.classList.remove('high-contrast');\n    }\n\n    // Colorblind mode\n    root.classList.remove(\n      'colorblind-protanopia',\n      'colorblind-deuteranopia',\n      'colorblind-tritanopia'\n    );\n    if (this.settings.colorblindMode !== 'none') {\n      root.classList.add(`colorblind-${this.settings.colorblindMode}`);\n    }\n\n    // Text scaling\n    root.style.setProperty('--text-scale', this.settings.textScaling);\n\n    // Motion reduction\n    if (this.settings.motionReduction) {\n      root.classList.add('motion-reduced');\n    } else {\n      root.classList.remove('motion-reduced');\n    }\n\n    // Large text\n    if (this.settings.largeText) {\n      root.classList.add('large-text');\n    } else {\n      root.classList.remove('large-text');\n    }\n\n    // Focus indicators\n    if (this.settings.focusIndicators) {\n      root.classList.add('focus-indicators');\n    } else {\n      root.classList.remove('focus-indicators');\n    }\n  }\n\n  /**\n   * Update accessibility settings\n   */\n  updateSettings(newSettings) {\n    this.settings = { ...this.settings, ...newSettings };\n    this.applyAccessibilitySettings();\n\n    this.logger.info('Accessibility settings updated');\n\n    // Emit settings changed event\n    this.eventBus.emit('accessibility:settingsChanged', {\n      settings: this.settings,\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Get current settings\n   */\n  getSettings() {\n    return { ...this.settings };\n  }\n\n  /**\n   * Announce text to screen readers\n   */\n  announce(text, priority = 'polite') {\n    if (!this.settings.screenReader) return;\n\n    const announcement = {\n      text,\n      priority,\n      timestamp: Date.now(),\n    };\n\n    this.announcementQueue.push(announcement);\n  }\n\n  /**\n   * Process announcement queue\n   */\n  processAnnouncementQueue() {\n    if (this.announcementQueue.length === 0) return;\n\n    const announcement = this.announcementQueue.shift();\n    const announcementRegion = document.getElementById(\n      'accessibility-announcements'\n    );\n\n    if (announcementRegion) {\n      announcementRegion.setAttribute('aria-live', announcement.priority);\n      announcementRegion.textContent = announcement.text;\n    }\n  }\n\n  /**\n   * Play audio cue\n   */\n  playAudioCue(cueType, frequency = 440, duration = 200) {\n    if (!this.settings.audioCues || !this.audioEnabled || !this.audioContext)\n      return;\n\n    try {\n      const oscillator = this.audioContext.createOscillator();\n      const gainNode = this.audioContext.createGain();\n\n      oscillator.connect(gainNode);\n      gainNode.connect(this.audioContext.destination);\n\n      oscillator.frequency.setValueAtTime(\n        frequency,\n        this.audioContext.currentTime\n      );\n      oscillator.type = 'sine';\n\n      gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);\n      gainNode.gain.linearRampToValueAtTime(\n        0.1,\n        this.audioContext.currentTime + 0.01\n      );\n      gainNode.gain.linearRampToValueAtTime(\n        0,\n        this.audioContext.currentTime + duration / 1000\n      );\n\n      oscillator.start(this.audioContext.currentTime);\n      oscillator.stop(this.audioContext.currentTime + duration / 1000);\n    } catch (error) {\n      this.logger.warn('Failed to play audio cue:', error);\n    }\n  }\n\n  /**\n   * Handle game started\n   */\n  handleGameStarted(data) {\n    this.announce('Game started');\n    this.playAudioCue('gameStart', 523, 300);\n  }\n\n  /**\n   * Handle game paused\n   */\n  handleGamePaused(data) {\n    this.announce('Game paused');\n    this.playAudioCue('pause', 330, 200);\n  }\n\n  /**\n   * Handle game resumed\n   */\n  handleGameResumed(data) {\n    this.announce('Game resumed');\n    this.playAudioCue('resume', 523, 200);\n  }\n\n  /**\n   * Handle game stopped\n   */\n  handleGameStopped(data) {\n    this.announce('Game stopped');\n    this.playAudioCue('gameOver', 220, 500);\n  }\n\n  /**\n   * Handle score changed\n   */\n  handleScoreChanged(data) {\n    if (data.scoreChange > 0) {\n      this.announce(\n        `Score increased by ${data.scoreChange}. Total score: ${data.score}`\n      );\n      this.playAudioCue('score', 659, 100);\n    }\n  }\n\n  /**\n   * Handle player damaged\n   */\n  handlePlayerDamaged(data) {\n    this.announce(`Player damaged. Lives remaining: ${data.lives}`);\n    this.playAudioCue('damage', 220, 300);\n  }\n\n  /**\n   * Handle item collected\n   */\n  handleItemCollected(data) {\n    this.announce(`Item collected: ${data.itemType}`);\n    this.playAudioCue('item', 880, 150);\n  }\n\n  /**\n   * Handle level started\n   */\n  handleLevelStarted(data) {\n    this.announce(`Level ${data.level} started`);\n    this.playAudioCue('levelStart', 523, 400);\n  }\n\n  /**\n   * Handle level completed\n   */\n  handleLevelCompleted(data) {\n    this.announce(\n      `Level ${data.level} completed in ${Math.floor(data.time / 1000)} seconds`\n    );\n    this.playAudioCue('levelComplete', 1047, 600);\n  }\n\n  /**\n   * Handle achievement unlocked\n   */\n  handleAchievementUnlocked(data) {\n    this.announce(`Achievement unlocked: ${data.name}`);\n    this.playAudioCue('achievement', 1319, 800);\n  }\n\n  /**\n   * Handle daily challenge completed\n   */\n  handleDailyChallengeCompleted(data) {\n    this.announce(`Daily challenge completed: ${data.name}`);\n    this.playAudioCue('challenge', 1047, 500);\n  }\n\n  /**\n   * Handle input\n   */\n  handleInput(data) {\n    if (this.settings.audioCues) {\n      this.playAudioCue('input', 440, 50);\n    }\n  }\n\n  /**\n   * Update accessibility features based on game state\n   */\n  updateAccessibilityFeatures(gameState) {\n    // Update focus management based on game state\n    if (gameState.isPaused) {\n      this.manageFocusOnPause();\n    } else if (gameState.isRunning) {\n      this.manageFocusDuringGameplay();\n    }\n  }\n\n  /**\n   * Manage focus when game is paused\n   */\n  manageFocusOnPause() {\n    // Ensure focus is on pause menu\n    const pauseMenu = document.querySelector('.pause-menu');\n    if (pauseMenu && pauseMenu.focus) {\n      pauseMenu.focus();\n    }\n  }\n\n  /**\n   * Manage focus during gameplay\n   */\n  manageFocusDuringGameplay() {\n    // Ensure focus is on game canvas or main game area\n    const gameArea = document.querySelector('.game-area');\n    if (gameArea && gameArea.focus) {\n      gameArea.focus();\n    }\n  }\n\n  /**\n   * Load accessibility settings from storage\n   */\n  async loadAccessibilitySettings() {\n    try {\n      const savedSettings = localStorage.getItem('accessibilitySettings');\n      if (savedSettings) {\n        const settings = JSON.parse(savedSettings);\n        this.settings = { ...this.settings, ...settings };\n        this.applyAccessibilitySettings();\n        this.logger.info('Accessibility settings loaded from storage');\n      }\n    } catch (error) {\n      this.logger.error('Failed to load accessibility settings:', error);\n    }\n  }\n\n  /**\n   * Save accessibility settings to storage\n   */\n  saveAccessibilitySettings() {\n    try {\n      localStorage.setItem(\n        'accessibilitySettings',\n        JSON.stringify(this.settings)\n      );\n      this.logger.info('Accessibility settings saved to storage');\n    } catch (error) {\n      this.logger.error('Failed to save accessibility settings:', error);\n    }\n  }\n\n  /**\n   * Reset accessibility settings to defaults\n   */\n  resetSettings() {\n    this.settings = {\n      screenReader: false,\n      highContrast: false,\n      colorblindMode: 'none',\n      keyboardNavigation: false,\n      audioCues: true,\n      audioDescriptions: false,\n      textScaling: 1.0,\n      motionReduction: false,\n      reducedAnimations: false,\n      largeText: false,\n      focusIndicators: true,\n    };\n\n    this.applyAccessibilitySettings();\n    this.logger.info('Accessibility settings reset to defaults');\n  }\n}\n\nexport default AccessibilityManager;\n"],"names":["GameManager","constructor","dependencies","this","eventBus","logger","config","Error","state","currentLevel","maxLevel","score","highScore","lives","levelStartTime","levelCompleted","gameOver","levelConfigs","initializeLevelConfigs","setupEventHandlers","info","initialize","loadGameData","setupLevel","cleanup","saveGameData","removeEventHandlers","update","deltaTime","gameState","levelTime","Date","now","levelConfig","timeLimit","handleLevelTimeout","updateLevelSpecificLogic","on","handleScoreChange","bind","handlePlayerDamaged","handleItemCollected","handleLevelCompleted","handleGameInput","handleConfigChange","handleAchievementUnlock","handleDailyChallengeCompletion","off","removeListener","targetScore","difficulty","levelNumber","concat","emit","level","timestamp","error","data","scoreChange","completeLevel","damage","scoreValue","itemType","time","completeGame","setTimeout","finalScore","finalLevel","type","restartGame","bonusScore","effects","applyAchievementEffects","applyChallengeEffects","extraLives","scoreMultiplier","temporaryScoreMultiplier","duration","temporaryPowerUp","savedData","localStorage","getItem","JSON","parse","lastPlayed","setItem","stringify","getState","getLevelConfig","setLevelConfig","length","AchievementManager","achievements","Map","unlockedAchievements","Set","progress","initializeAchievements","loadAchievementData","saveAchievementData","checkTimeBasedAchievements","checkComboAchievements","defineAchievement","name","description","target","reward","title","icon","id","definition","set","unlocked","unlockedAt","handleGameStarted","handleComboChanged","currentScore","checkScoreAchievements","checkLevelAchievements","checkSpeedAchievements","checkPerfectLevelAchievements","checkCollectionAchievements","gameStartTime","combo","currentLevelPerfect","checkAchievementsByType","currentCount","get","playTime","levelData","perfect","value","achievement","unlockAchievement","add","applyAchievementReward","source","achievementId","livesChange","getAchievement","getAllAchievements","Array","from","values","getUnlockedAchievements","filter","a","getAchievementProgress","percentage","Math","min","getAllAchievementProgress","push","forEach","has","Object","entries","fromEntries","resetAchievements","clear","DailyChallengeManager","challenges","activeChallenges","completedChallenges","challengeProgress","lastChallengeDate","challengeTemplates","initializeChallengeTemplates","loadChallengeData","generateDailyChallenges","saveChallengeData","checkDailyChallengeRotation","updateChallengeProgress","coins","collection","survival","today","toDateString","challengeTypes","keys","getRandomElements","index","template","getRandomElement","challenge","createChallenge","date","replace","completed","completedAt","createdAt","checkScoreChallenges","checkLevelChallenges","checkTimeChallenges","checkSurvivalChallenges","checkCollectionChallenges","checkComboChallenges","currentGameScore","currentGameLevel","currentGameItems","currentGameCombo","survivalCount","checkChallengesByType","timeInSeconds","floor","completeChallenge","challengeId","applyChallengeReward","coinsChange","getActiveChallenges","c","getCompletedChallenges","getAllChallenges","getChallengeProgress","getAllChallengeProgress","array","count","sort","random","slice","resetChallenges","AccessibilityManager","settings","screenReader","highContrast","colorblindMode","keyboardNavigation","audioCues","audioDescriptions","textScaling","motionReduction","reducedAnimations","largeText","focusIndicators","audioContext","audioEnabled","announcements","announcementQueue","loadAccessibilitySettings","initializeAudio","setupDOMAccessibility","saveAccessibilitySettings","close","processAnnouncementQueue","updateAccessibilityFeatures","handleGamePaused","handleGameResumed","handleGameStopped","handleScoreChanged","handleLevelStarted","handleAchievementUnlocked","handleDailyChallengeCompleted","handleInput","window","AudioContext","webkitAudioContext","warn","createAnnouncementRegion","setupKeyboardNavigation","applyAccessibilitySettings","announcementRegion","document","createElement","setAttribute","style","cssText","body","appendChild","addEventListener","event","handleKeyboardNavigation","key","handleTabNavigation","handleActivation","handleEscape","handleArrowNavigation","querySelectorAll","activeElement","click","direction","toLowerCase","root","documentElement","classList","remove","setProperty","updateSettings","newSettings","getSettings","announce","text","priority","announcement","shift","getElementById","textContent","playAudioCue","cueType","frequency","oscillator","createOscillator","gainNode","createGain","connect","destination","setValueAtTime","currentTime","gain","linearRampToValueAtTime","start","stop","isPaused","manageFocusOnPause","isRunning","manageFocusDuringGameplay","pauseMenu","querySelector","focus","gameArea","savedSettings","resetSettings"],"mappings":"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"}